<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main-page.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main-page.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Модуль для работы с окном
 * @member main-page
  */

//модуль для работы с окнами
const createViewModel = require("./main-view-model").createViewModel,
    //билиблиоека для обмена даными между программой и WebView
    webViewInterfaceModule = require('nativescript-webview-interface'),
    //модлуь для работы со считывателем
    UHF = require('./common/UHF')

/**  Открытие окна
 * @function onNavigatingTo
 * @param {Object} args Параметры  
 * @memberof main-page
 */
var onNavigatingTo = args => {
    //получаем праметры страницы
    const page = args.object;
    //создаем окно
    page.bindingContext = createViewModel();
}

/**
 * Выполнение при загрузке документа
 * @function pageLoaded
 * @parms {Object} args Параметры
 * @memberof main-page
 */
var pageLoaded = args => {
    //получение параметров окна
    page = args.object;
    //установка параметров для обмена данными с WebView 
    setupWebViewInterface(page)
}

/** 
 * Инициализация связи между приложением и WebView
 * @function setupWebViewInterface
 * @param {Object} Окно привязки
 * @memberof main-page
 */
var setupWebViewInterface = page => {
    //получение элемента
    var webView = page.getViewById('webView');
    //установка соедидения
    oWebViewInterface = new webViewInterfaceModule.WebViewInterface(webView, 'file:///storage/emulated/0/MapMine/src/index.html');
}


UHF.getArr().then(list => {
    console.log("TCL: onFindUHF -> list", list)
    //отправить данные в WebVIEW
    oWebViewInterface.emit('listUHF', list)
})

exports.onNavigatingTo = onNavigatingTo;
exports.pageLoaded = pageLoaded;
//указание onFindUHF как экспортной
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#main-page">main-page</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Sep 30 2019 15:13:32 GMT+0300 (GMT+03:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
